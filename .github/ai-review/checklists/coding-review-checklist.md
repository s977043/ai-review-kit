# コードレビューの観点チェックリスト

このドキュメントは、コードレビューにおいて着目すべき観点をまとめたものです。プロジェクトごとの詳細なガイドラインではなく、共通して意識したいポイントを列挙します。AIエージェントがレビューを行う際にも、人間のレビュー担当者が使用する場合にも活用できます。

## 1. 可読性
- 後から読む人のためのコードになっているか。名前やコメントは「短さ」よりも「意味の明確さ」を優先する。
- 関数や変数の名前だけで役割が理解できるか。
- コメントは「何をしているか」ではなく「なぜそうしているのか」を説明しているか。
- 1つの関数に複数の責務が混在していないか。長くなりすぎる場合は適切に分割する。

## 2. 厳密性
- 同値比較では暗黙の型変換を避け、JavaScriptでは `===` / `!==` を使用しているか。
- 未定義となる値 (`undefined`)や null、NaN などの値を明確に扱っているか。
- 判定式は「正常系が true になるよう」に書かれているか。多重否定や読みづらい条件式を避ける。

## 3. 体装と差分
- インデントやスペースなどフォーマットがチームの標準に治っているか。
- 不要な空行や末尾スペース、意味のないリネームなど、ノイズとなる差分が綺れていないか。

## 4. 命名・データの扱い
- 変数や関数名は役割が推測できる名前になっているか。略語や永例的すぎる名前を避ける。
- マジックナンバーを直接記述せず、定数としてまとめているか。
- 同じ処理や値の重複があれば共通化し、DRY (Don't Repeat Yourself) と OAOO (Once And Only Once) を意識しているか。

## 5. 設計
- クラスやモジュールの責務が適切に分割されているか。継承よりもコンポジション ( 保有 ) を優先しているか。
- 外部から直接アクセスできるメンバーは必要最小限に押えられているか。
- 関数や変数の定義順序が読みやすさを考慮しているか。

## 6. 制御構造
- ブロック `{}` を省略しない ( 省略する場合は1行だけに限定する ) など、制御構造が明確になっているか。
- ループは目的に合った書き方になっているか ( `for…of` / `for…in` や配列メソッドの利用など )。
- `switch` 文の `break` の扱いなど、意図しないフォールスルーがないか。

## 7. エラー処理
- 本当に発生しうるエラーのみを補証し、想定外のエラーを揺りつぶしていないか。
- ユーザーに通知すべきエラーと開発者向けのエラーを区別しているか。

## 8. パフォーマンスと可読性のバランス
- 性能改善のために可読性を特に特に獲くしていないか。どうしても特に獲くしている場合はコメントで理由を残しているか。

## 9. 変更の単位
- プルリクエストは単一の目的にフォーカスしているか。フォーマットの修正と機能変更が混在していないか。
- テスト (AIエージェントによるテストを含む) が変更内容を拡張しているか。

## 10. レビュー結果の判断基準
- 上述の観点に照らして大きな問題がなければ承認し、重大な問題があれば差し戻す。
- 承認・差し戻しの理由を明確に伝え、レビュイーが改善できるよう支援する。

---

このチェックリストは基礎的な観点をまとめたものであり、各プロジェクトでは目的や技術スタックに従じて補足・変更を行ってください。
